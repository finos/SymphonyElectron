#!/usr/bin/env bash

## Set the path where the package file exists
package_path=/Users/johndoe/Downloads/SDA.pkg

## DO NOT CHANGE THIS
settings_temp_file="/tmp/sym_settings.txt"

## Set the POD URL and other user related settings.
## Note, all the user related settings should be either "ENABLED", "DISABLED" or "NOT_SET"
pod_url="https://corporate.symphony.com/login/sso/initsso"
minimize_on_close="ENABLED"
launch_on_startup="ENABLED"
always_on_top="DISABLED"
bring_to_front="DISABLED"
dev_tools_enabled="ENABLED"

## DO NOT CHANGE THIS
sudo echo ${pod_url} > ${settings_temp_file}
sudo echo ${minimize_on_close} >> ${settings_temp_file}
sudo echo ${launch_on_startup} >> ${settings_temp_file}
sudo echo ${always_on_top} >> ${settings_temp_file}
sudo echo ${bring_to_front} >> ${settings_temp_file}
sudo echo ${dev_tools_enabled} >> ${settings_temp_file}

## DO NOT CHANGE THIS
permissions_temp_file="/tmp/sym_permissions.txt"

## Set the permissions. By default, it should be "ENABLED" for all unless you know what you are doing
media="ENABLED"
geo_location="ENABLED"
notifications="ENABLED"
midi_sysex="ENABLED"
pointer_lock="ENABLED"
full_screen="ENABLED"
open_external_app="ENABLED"

## DO NOT CHANGE THIS
sudo echo ${media} > ${permissions_temp_file}
sudo echo ${geo_location} >> ${permissions_temp_file}
sudo echo ${notifications} >> ${permissions_temp_file}
sudo echo ${midi_sysex} >> ${permissions_temp_file}
sudo echo ${pointer_lock} >> ${permissions_temp_file}
sudo echo ${full_screen} >> ${permissions_temp_file}
sudo echo ${open_external_app} >> ${permissions_temp_file}

sudo installer -store -pkg ${package_path} -target /

rm -rf ${settings_temp_file}
rm -rf ${permissions_temp_file}
